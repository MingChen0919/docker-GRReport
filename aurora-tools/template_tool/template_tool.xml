<tool id="template_tool" name="template tool" version="1.0.0">
    <description>
        template tool website report.
    </description>
    <stdio>
        <regex match="Execution halted"
               source="both"
               level="fatal"
               description="Execution halted." />
        <regex match="Error in"
               source="both"
               level="fatal"
               description="An undefined error occured, please check your intput carefully and contact your administrator." />
        <regex match="Fatal error"
               source="both"
               level="fatal"
               description="An undefined error occured, please check your intput carefully and contact your administrator." />
    </stdio>
    <command>
        <![CDATA[
        ## Add tools to PATH
        export PATH=/opt/R-3.2.5/bin:\$PATH &&

        Rscript '${__tool_directory__}/template_tool_render.R'

            ## 1. input data
            -r $reads
            -e $echo

            ## 2. output report and report site directory
		    -o $template_tool
		    -d $template_tool.files_path

		    ## 3. Rmd templates sitting in the tool directory

		        ## _site.yml and index.Rmd template files
                -s '${__tool_directory__}/_site.yml'
                -i '${__tool_directory__}/index.Rmd'

                ## other Rmd body template files
		        -x  '${__tool_directory__}/01_template.Rmd'
		        -y  '${__tool_directory__}/02_template.Rmd'


        ]]>
    </command>
    <inputs>
        <param format="fastq,fastq.gz,fastq.bz2,bam,sam" multiple="true" name="reads" type="data" label="Short reads data from history" />
        <param type="boolean" name="echo" truevalue="TRUE" falsevalue="FALSE" checked="false" label="Display analysis code in report?" />
    </inputs>
    <outputs>
        <data format="html" name="template_tool" label="template tool" />
    </outputs>
</tool>